---
title: 视图机制
hide_title: true
hide_table_of_contents: false
slug: app-view
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

**Pywss** 通过 `app.view` 实现了简单的视图机制，以便更加友好的支持 Restful 风格代码，参考如下：

```python
import pywss

class UserView:

    def http_get(self, ctx: pywss.Context):
        uid = ctx.route_params["uid"]
        ctx.write({"uid": uid, "msg": "query success"})

    def http_post(self, ctx: pywss.Context):
        uid = ctx.route_params["uid"]
        ctx.write({"uid": uid, "msg": "create success"})

def main():
    app = pywss.App()
    app.view("/api/user/{uid}", UserView())
    app.run()

if __name__ == '__main__':
    main()
```

此外，为了更好的管理大型项目，**Pywss** 支持 `app.view_modules` 来实现 **文件即路由** 的管理风格。下面是一个案例：

对于如下目录结构：
```text
- api
  - v1
    - user.py
    - role.py
  - v2
    - permission.py
```

<Tabs>
  <TabItem value="user.py" label="user.py" default>

```python
import pywss

__route__="/user"  # 指定路由，可选，默认为 /user
__view__="View"  # 指定视图对象，可选，默认为 View

class View:

    @pywss.openapi.docs(summary="获取用户列表")
    def http_get(ctx: pywss.Context):
        pass
```

  </TabItem>
  <TabItem value="role.py" label="role.py">

```python
imprt pywss

__route__="/role/{rid}"  # 指定路由，可选，默认为 /role
__view__="View"  # 指定视图对象，可选，默认为 View

class View:

    @pywss.openapi.docs(summary="获取角色列表")
    def http_get(ctx: pywss.Context):
        pass
```

  </TabItem>
  <TabItem value="permission.py" label="permission.py">

```python
import pywss

__route__="/perm"  # 指定路由，可选，默认为 /permission
__view__="View"  # 指定视图对象，可选，默认为 View

class View:

    @pywss.openapi.docs(summary="获取权限列表")
    def http_get(ctx: pywss.Context):
        pass
hello~
```

  </TabItem>
</Tabs>

此时，项目路由将转化为：
```text
- GET/api/v1/user
- GET/api/v1/role/{rid}
- GET/api/v2/perm
```

具体使用场景可参考：[pywss-be](https://github.com/czasg/pywss-react-admin-be)


