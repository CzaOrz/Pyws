---
title: 简介
hide_title: true
hide_table_of_contents: false
slug: /
---

export const Highlight = ({children}) => (
  <span
    style={{
      backgroundColor: '#f1f0d8',
      borderRadius: '10px',
      color: '#000',
      padding: '0.4rem',
      fontWeight: 700,
    }}>
    {children}
  </span>
);

:::note 当前最新版本

![PyPI](https://img.shields.io/pypi/v/pywss?color=green)
![Codecov](https://img.shields.io/codecov/c/github/czasg/pywss?token=JSXIQXY1EQ)

:::

## Pywss
Pywss（发音 /piːwaɪz/，类似 **p~whys**）是一个轻量级的 Python Web 框架，它基于 Python3.6+ 特性构建。

与 Flask、Django 等主流框架不同的是，Pywss 的底层并没有实现 WSGI 接口协议。
其编程风格也更类似于 Gin、Iris 等框架，因此对于熟悉这些框架的开发者来说，Pywss 是一个非常值得探索的项目。

其关键特性有：
- **简单**：拒绝海量参数，减少心智负担。了解上下文 <Highlight>pywss.Context</Highlight> 即刻启程。
- **快速**：纯手撸 socket，拒绝中间商赚取性能差价。(实在有性能追求的同学，不妨再探索下其他语言~**Go**~)
- **优雅**：<Highlight>next</Highlight> 设计真的太优雅了。如果你也和我一样喜欢，那我觉得这件事情，**泰裤辣！！**
- **标准**：集成了部分 OpenAPI（Swagger）能力，方便开发者快速生成 API 文档并进行调试。
- **测试**：开箱即用的 **API 测试模块**，不启动服务也能测试接口功能辣！
- **工具链**：开箱即用的工具库，提供 **WebSocket** 等能力。


## Example
以下展示了一些最基本的用例，如果你有一定后端编程基础，相信你看完这些用例，大概就知道 Pywss 做了什么事情了。


```python title="一个简单的应用" showLineNumbers
import pywss

app = pywss.App()
app.get("/hello", lambda ctx: ctx.write("HelloWorld"))
app.run()
```


```python title="优雅实现 log 中间件" showLineNumbers {6}
import pywss
import time

def logMiddleware(ctx: pywss.Context):
    startTime = time.time()
    ctx.next()  # 执行下一个handler
    cost = time.time() - startTime
    print(f"{ctx.method} - {ctx.route} - cost: {cost: .2f}")
```


```python title="优雅实现 cors 中间件" showLineNumbers {11}
import pywss
import time

def corsMiddleware(ctx: pywss.Context):
    ctx.set_header(pywss.HeaderAccessControlAllowOrigin, "*")
    ctx.set_header(pywss.HeaderAccessControlAllowMethods, "*")
    ctx.set_header(pywss.HeaderAccessControlAllowHeaders, "*")
    ctx.set_header(pywss.HeaderAccessControlAllowCredentials, "true")
    if ctx.method == pywss.MethodOptions:
        return
    ctx.next()  # 执行下一个handler，若不调用，则当前handler为最后执行逻辑
```


```python title="swagger" showLineNumbers {3,8}
import pywss

@pywss.openapi.docs("接口说明")
def hello(ctx: pywss.Context):
    pass

app = pywss.App()
app.openapi()  # 启动openapi
app.get("/hello", hello)
app.run()
```


```python title="websocket" showLineNumbers {4}
import pywss

def helloWS(ctx: pywss.Context):
    err = pywss.WebSocketUpgrade(ctx)
    if err:
        return
    ctx.ws_read()
    crx.ws_write()

app = pywss.App()
app.get("/hello/ws", helloWS)
app.run()
```


```python title="接口测试" showLineNumbers {6}
import pywss

app = pywss.App()
app.get("/hello", lambda ctx: ctx.write("HelloWorld"))

req = pywss.HttpTestRequest(app)  # 基于app创建HttpRequest
resp = req.get("/hello")  # 发起Get请求，获取resp
assert resp.status_code == 200
assert resp.body == "HelloWorld"
```

## Why
可能大部分会同学对 Python Web 框架感觉到厌烦...

因为它们的选择实在是太多了，你甚至可以轻易的说出五种以上的框架，包括：Flask、Django、Tornado、FastAPI、Bottle等等。
每个框架都有自己的特点和适用场景。在选择适合你项目需求的框架时，这些丰富的选择往往会成为纠结点。

在这种背景下，Pywss 诞生了，尽管我知道在你的选择中，Pywss 会是末尾甚至排不上位。

<Highlight>但 Pywss 致力于追求真正的轻量级。</Highlight>

<br/>
<br/>

或许你会觉得 Flask 足够轻量，但如果你不了解 **ThreadLocalData、RequestHook、Blueprints、g** 等相关概念及原理，我甚至会觉得你没有入门。

说到底，当代 Web 框架功能太多了，多到你记不完的参数、写不明白的配置、翻不完的文档...

所以，如果你刚好有一个非正式的项目，也刚好在选择合适的框架...

我会推荐你使用 Pywss ！！
