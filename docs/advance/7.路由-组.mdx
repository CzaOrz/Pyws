---
title: 路由-组
hide_title: true
hide_table_of_contents: false
slug: route-group
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::note 什么是多级路由管理？

在路由管理中，按一定属性分类聚合路由的方法，可以叫多级路由管理

:::

## 多级路由管理

Pywss 通过 `app.party` 提供了**路由组**的能力，用于支持**多级路由管理**。

以下通过一个案例来拆分多级路由。

```python {4-15}
import pywss

def register_route(app: pywss.App):
    app.get("/api/v1/docs")
    app.get("/api/v2/docs")
    app.get("/api/v3/docs")
    app.get("/api/v1/author")
    app.get("/api/v2/author")
    app.get("/api/v3/author")
    app.get("/api/v1/github")
    app.get("/api/v2/github")
    app.get("/api/v3/github")
    app.get("/api/v1/history")
    app.get("/api/v2/history")
    app.get("/api/v3/history")

app = pywss.App()
register_route(app)
app.run()
```

在上面的路由模块中，我们可以看到包含了三个版本的接口:
- **`/api/v1`**
- **`/api/v2`**
- **`/api/v3`**

并且这三个版本的接口都提供了四种能力:
- **`/docs`**
- **`/author`**
- **`/github`**
- **`/history`**

下面，我们通过 **`app.party`** 来拆分多级路由。

<Tabs className="unique-tabs">
<TabItem value="main" label="main.py" default>

```python {8-10}
import pywss

from .v1 import register_v1
from .v2 import register_v2
from .v3 import register_v3

app = pywss.App()
v1 = app.party("/api/v1")
v2 = app.party("/api/v2")
v2 = app.party("/api/v3")

register_v1(v1)
register_v2(v2)
register_v3(v3)

app.run()
```

</TabItem>
<TabItem value="v1" label="v1.py">

```python
import pywss

def register_v1(app: pywss.App):
    app.get("/docs")
    app.get("/author")
    app.get("/github")
    app.get("/history")
```

</TabItem>
<TabItem value="v2" label="v2.py">

```python
import pywss

def register_v2(app: pywss.App):
    app.get("/docs")
    app.get("/author")
    app.get("/github")
    app.get("/history")
```

</TabItem>
<TabItem value="v3" label="v3.py">

```python
import pywss

def register_v3(app: pywss.App):
    app.get("/docs")
    app.get("/author")
    app.get("/github")
    app.get("/history")
```

</TabItem>
</Tabs>

可以看到，经过我们这一套拆下来，明显感觉更乱了😥

但是有经验的程序员应该已经懂了😤
