---
title: 快速开始
hide_title: true
hide_table_of_contents: false
slug: /start
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## 安装
Pywss 依赖 python 3.6+ 版本的部分特性。

如果你刚好使用的是 3.6 及以上版本的话，那么恭喜你，你可以通过`pip`实现快速安装。

<Tabs className="unique-tabs">
<TabItem value="pip安装" label="pip安装" default>

```shell script
pip3 install pywss
```

</TabItem>
<TabItem value="源码安装" label="源码安装" default>

```shell script
python setup.py install
```

</TabItem>
</Tabs>

Pywss 目前仅依赖一个日志库 [loggus](https://github.com/czasg/loggus)，该库是作者对结构化日志库的探索成果，暂时够用😅。

后续会考虑切回原生日志库 logging，减少心智负担😅。


## 创建应用
本节继续以 hello world 为例，从零开始快速速搭建一个 web 应用。

首先，再本地创建 **main.py** 文件并写入以下源码。

<Tabs className="unique-tabs">
  <TabItem value="main.py" label="main.py" default>

```python showLineNumbers title="web源码"
import pywss

def helloHandler(ctx: pywss.Context):
  ctx.write({"hello": "world"})

def main(defaultPort = 8080):
    app = pywss.App()
    app.get("/hi", lambda ctx: ctx.write("hi~"))  # 支持匿名函数
    app.post("/hello", helloHandler)
    app.run(port=defaultPort)

if __name__ == '__main__':
    """
    python3 main.py 启动服务
    """
    main()
```

  </TabItem>
  <TabItem value="GET/hi" label="GET/hi">

```shell script title="请求 /hi 接口"
>>> curl localhost:8080/hi
hi~
```

  </TabItem>
  <TabItem value="POST/hello" label="POST/hello">

```shell script title="请求 /hello 接口"
>>> curl -X POST localhost:8080/hello
{"hello": "world"}
```

  </TabItem>
</Tabs>

我们来简单解读下`main.py`源码，首先是在第7行初始化了一个`app`，并在第10行执行`app.run`启动 web 应用。
这两行代码，囊括了 app 从初始化到启动的整个周期。

其次是中间的业务模块。

最特殊的就是第8、9行的注册路由方法，分别有：
- `app.get(/hi, ...` 表示注册 **Http Get** 方法，并指定路由 `/hi`。
- `app.post(/hello, ...` 表示注册 **Http Post** 方法，并指定路由 `/hello`。

服务启动后，我们可以通过 curl 来验证服务。结果见上。

至此，一个简单的 hello world 应用就搭建完成了。
